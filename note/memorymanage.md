## 内存管理
### 内核空间和用户空间
- linux 的`虚拟地址空间`为0~4G字节(32位). 最高的1G字节(0xC0000000~0xFFFFFFFF)供内核使用, 称为`内核空间`. 较低的3G字节(0x00000000~0xBFFFFFFF)供各个进程使用, 称为`用户空间`.

- 每个进程各自私有的用户空间, 对其他进程不可见. 而虚拟内核空间则为所有进程以及内核共享. 对于进程来说这个虚拟地址空间的总大小为4G, 但是实际可用的只有`用户空间部分`.

- 内核地址空间又可用进一步划分为两部分: `LOWMEM地址空间`和`VMALLOC地址空间`.
- 前者(LOWMEM)在启动时就已经`线性`映射到对应的物理空间, 对应的物理空间是连续的, (给定一个虚地址x, 其物理地址为“x - PAGE_OFFSET”).
- 而后者(VMALLOC)则根据需要动态映射到ZONE_HIGHMEM的某段物理内存上, 由vmalloc管理(解决1G的虚拟地址空间如何访问整个4G的物理空间的问题).

- Linux内核把`物理地址空间`划分为三个区域:
    ZONE_DMA        : `线性`映射到内核的`LOWMEM地址空间`
    ZONE_NORMAL     : `线性`映射到内核的`LOWMEM地址空间`
    ZHONE_HIGHMEM   : 映射到`用户虚拟地址空间`

- 64位系统, 同32位一样, 内核空间和用户空间在一个在顶部一个在底部. 由于其具有的地址空间足够大(`16EB`), 因此内核空间可以直接映射到物理空间, 不需要走`ZONE_HIGHMEM`那套映射机制.

- reference:
<https://zhuanlan.zhihu.com/p/66794639>
<https://blog.csdn.net/u012317017/article/details/12996517>
